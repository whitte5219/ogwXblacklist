<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ogwXblacklist</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <button class="icon-btn shield" id="admin-shield" title="Admin">
        <i class="fa-solid fa-shield-halved"></i>
      </button>

      <div class="brand">
        <div class="brand-mark"><i class="fa-solid fa-ban"></i></div>
        <div class="brand-text">
          <div class="brand-title">ogwXblacklist</div>
          <div class="brand-subtitle">community-driven blacklist</div>
        </div>
      </div>

      <nav class="nav">
        <button class="nav-btn" id="nav-request"><i class="fa-solid fa-plus"></i> Request</button>
        <button class="nav-btn active" data-tab="blacklist"><i class="fa-solid fa-list"></i> Blacklist</button>
        <button class="nav-btn" data-tab="yours"><i class="fa-solid fa-user"></i> Your Posts</button>

        <span class="nav-divider hidden" id="admin-divider"></span>
        <button class="nav-btn hidden" data-tab="admin-reports" id="nav-admin-reports">
          <i class="fa-solid fa-flag"></i> Reports
        </button>
        <button class="nav-btn hidden" data-tab="admin-requests" id="nav-admin-requests">
          <i class="fa-solid fa-user-check"></i> Requests
        </button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- BLACKLIST TAB -->
    <section class="tab active" id="tab-blacklist">
      <div class="panel">
        <div class="panel-head">
          <h2><i class="fa-solid fa-list-check"></i> Blacklist</h2>
          <div class="subtabs" role="tablist">
            <button class="subtab active" data-category="verified">Verified</button>
            <button class="subtab" data-category="requested">Requested</button>
            <button class="subtab" data-category="unverified">Unverified</button>
          </div>
        </div>

        <div class="grid three" id="posts-grid"></div>
        <div class="empty hidden" id="posts-empty">
          <i class="fa-solid fa-inbox"></i>
          <div>
            <div class="empty-title">Nothing here yet</div>
            <div class="empty-text">Be the first to post a report.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- YOUR POSTS TAB -->
    <section class="tab" id="tab-yours">
      <div class="panel">
        <div class="panel-head">
          <h2><i class="fa-solid fa-user"></i> Your Posts</h2>
          <div class="hint">
            These are posts created from this device/browser (local).
          </div>
        </div>

        <div class="grid three" id="your-posts-grid"></div>
        <div class="empty hidden" id="your-posts-empty">
          <i class="fa-solid fa-circle-plus"></i>
          <div>
            <div class="empty-title">No posts yet</div>
            <div class="empty-text">Click <b>Request</b> to create your first post.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ADMIN: REPORTS -->
    <section class="tab" id="tab-admin-reports">
      <div class="panel">
        <div class="panel-head">
          <h2><i class="fa-solid fa-flag"></i> Reports</h2>
          <div class="hint">Dismissing clears all reports for the post.</div>
        </div>

        <div class="grid two" id="reports-grid"></div>
        <div class="empty hidden" id="reports-empty">
          <i class="fa-solid fa-shield-heart"></i>
          <div>
            <div class="empty-title">No reports</div>
            <div class="empty-text">Looks clean.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ADMIN: REQUESTS -->
    <section class="tab" id="tab-admin-requests">
      <div class="panel">
        <div class="panel-head">
          <h2><i class="fa-solid fa-user-check"></i> Verification Requests</h2>
          <div class="hint">Verify → moves to Verified. Reject → moves to Unverified.</div>
        </div>

        <div class="grid two" id="requests-grid"></div>
        <div class="empty hidden" id="requests-empty">
          <i class="fa-solid fa-clipboard-check"></i>
          <div>
            <div class="empty-title">No verification requests</div>
            <div class="empty-text">Nothing waiting.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div>© <span id="year"></span> ogwXblacklist</div>
    <div class="footer-right">
      <span class="pill" id="client-pill" title="Local device id used for likes/reports/your posts">
        <i class="fa-solid fa-fingerprint"></i> <span id="client-id-short"></span>
      </span>
    </div>
  </footer>

  <!-- TOAST -->
  <div class="toast-wrap" id="toast-wrap" aria-live="polite" aria-atomic="true"></div>

  <!-- MODAL: REQUEST CHOICE -->
  <div class="modal hidden" id="modal-request-choice">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title"><i class="fa-solid fa-plus"></i> Create a post</div>
        <button class="icon-btn" data-close="1" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="modal-body">
        <p class="muted">Choose where to post.</p>
        <div class="choice-grid">
          <button class="choice" id="choice-unverified">
            <div class="choice-title"><i class="fa-solid fa-circle-question"></i> Post to Unverified</div>
            <div class="choice-text">No cooldown. Proof optional.</div>
          </button>
          <button class="choice" id="choice-requested">
            <div class="choice-title"><i class="fa-solid fa-user-check"></i> Post to Verified (Requested)</div>
            <div class="choice-text">3-minute cooldown. Proof required.</div>
          </button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="btn secondary" data-close="1">Cancel</button>
      </div>
    </div>
  </div>

  <!-- MODAL: POST FORM -->
  <div class="modal hidden" id="modal-post-form">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card wide">
      <div class="modal-head">
        <div class="modal-title" id="post-form-title"><i class="fa-solid fa-pen-to-square"></i> New Post</div>
        <button class="icon-btn" data-close="1" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>

      <div class="modal-body">
        <div class="form-grid">
          <div class="form-group">
            <label for="pf-username">Player username <span class="req">*</span></label>
            <input id="pf-username" type="text" maxlength="32" placeholder="e.g. Player123" autocomplete="off">
          </div>

          <div class="form-group">
            <label for="pf-title">Post name <span class="req">*</span></label>
            <input id="pf-title" type="text" maxlength="80" placeholder="e.g. Exploiting in SBR" autocomplete="off">
          </div>

          <div class="form-group full">
            <label for="pf-description">Description (optional)</label>
            <textarea id="pf-description" rows="4" maxlength="800" placeholder="Details... (avoid personal info)"></textarea>
          </div>

          <div class="form-group full">
            <label for="pf-media">
              Screenshots / Videos
              <span class="muted-inline" id="pf-media-hint"></span>
            </label>
            <input id="pf-media" type="file" accept="image/*,video/*" multiple>
            <div class="muted small">
              Limits: images ≤ 5MB each, videos ≤ 10MB each, max 5 files total. Stored as base64 in the DB.
            </div>
            <div class="media-preview" id="pf-media-preview"></div>
          </div>
        </div>
      </div>

      <div class="modal-foot">
        <button class="btn secondary" data-close="1">Cancel</button>
        <button class="btn" id="pf-submit"><i class="fa-solid fa-paper-plane"></i> Post</button>
      </div>
    </div>
  </div>

  <!-- MODAL: VIEW POST -->
  <div class="modal hidden" id="modal-view-post">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card huge">
      <div class="modal-head">
        <div class="modal-title"><i class="fa-solid fa-eye"></i> View Post</div>
        <button class="icon-btn" data-close="1" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>

      <div class="modal-body">
        <div class="post-view">
          <div class="post-view-head">
            <div>
              <h3 id="vp-title">—</h3>
              <div class="meta">
                <span class="chip"><i class="fa-solid fa-user"></i> <span id="vp-username">—</span></span>
                <span class="chip"><i class="fa-solid fa-calendar"></i> <span id="vp-created">—</span></span>
                <span class="chip hidden" id="vp-verified-chip"><i class="fa-solid fa-check"></i> Verified: <span id="vp-verified">—</span></span>
                <span class="chip" id="vp-category-chip"><i class="fa-solid fa-tag"></i> <span id="vp-category">—</span></span>
              </div>
            </div>

            <div class="post-actions">
              <button class="btn small" id="vp-like"><i class="fa-regular fa-thumbs-up"></i> <span id="vp-like-count">0</span></button>
              <button class="btn small danger" id="vp-dislike"><i class="fa-regular fa-thumbs-down"></i> <span id="vp-dislike-count">0</span></button>
              <button class="btn small secondary" id="vp-report"><i class="fa-solid fa-flag"></i> Report</button>
              <button class="btn small danger hidden" id="vp-delete"><i class="fa-solid fa-trash"></i> Delete</button>
            </div>
          </div>

          <div class="divider"></div>

          <div class="post-view-body">
            <div class="desc" id="vp-description">—</div>

            <div class="media-gallery" id="vp-media"></div>

            <div class="muted small" id="vp-vote-hint"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: ADMIN LOGIN -->
  <div class="modal hidden" id="modal-admin-login">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title"><i class="fa-solid fa-shield"></i> Admin Login</div>
        <button class="icon-btn" data-close="1" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="modal-body">
        <div class="form-grid">
          <div class="form-group full">
            <label for="ad-pass">Password</label>
            <input id="ad-pass" type="password" placeholder="Enter password">
          </div>
          <div class="form-group full">
            <label for="ad-token">Token</label>
            <textarea id="ad-token" rows="3" placeholder="Paste token"></textarea>
          </div>
        </div>

        <div class="warning">
          <i class="fa-solid fa-triangle-exclamation"></i>
          Admin mode is client-side. For real security, protect admin actions with Firebase Auth/claims.
        </div>
      </div>
      <div class="modal-foot">
        <button class="btn secondary" data-close="1">Cancel</button>
        <button class="btn" id="ad-login"><i class="fa-solid fa-right-to-bracket"></i> Login</button>
      </div>
    </div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
